<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="http://docbook.org/xml/5.1/rng/docbookxi.rng" schematypens="http://relaxng.org/ns/structure/1.0"?>
<?xml-model href="http://docbook.org/xml/5.1/sch/docbook.sch" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns:xlink="http://www.w3.org/1999/xlink" version="5.1">
    <title>FHIR resources as ANF Statements</title>


    <para>This section includes logical transformations to demonstrate how a variety of FHIR
        resources may be normalized to ANF Statements. The examples in this section demonstrate that
        ANF can be used to aggregate any type of resource or profile.. </para>
    <para>Processing instruction are represented using natural language,(e.g.
            [<emphasis>instruction</emphasis>]) and the"Data Elements" use path expressions using
        with <link xlink:href="http://hl7.org/fhirpath/">FHIRpath</link>.</para>

    <section>
        <title>Normalizing a FHIR Observation</title>
        <para>This example demonstrates how a FHIR Observation (Systolic Blood Pressure) can be
            represented as a normalized statement using the ANF Reference Model and normalization
            guidance described in Editorial Rules.</para>
        <table>
            <title>FHIR Observation to ANF Statement Transform</title>
            <tgroup cols="6">
                <colspec colnum="1" colname="col1" colwidth="1*"/>
                <colspec colnum="2" colname="col2" colwidth="1*"/>
                <colspec colnum="3" colname="col3" colwidth="1*"/>
                <colspec colnum="4" colname="col4" colwidth="1*"/>
                <colspec colnum="5" colname="col5" colwidth="1*"/>
                <colspec colnum="6" colname="col6" colwidth="1*"/>
                <thead>
                    <row>
                        <entry namest="col1" nameend="col3"><emphasis role="bold"
                                >Observation</emphasis></entry>
                        <entry><emphasis role="bold">Systolic Blood Pressure</emphasis>
                            Example</entry>
                        <entry namest="col5" nameend="col6"><emphasis role="bold"
                                >ANFStatement</emphasis></entry>
                    </row>
                    <row>
                        <entry><emphasis role="bold">Data Element</emphasis></entry>
                        <entry><emphasis role="bold">Concept Domain Mapping</emphasis></entry>
                        <entry><emphasis role="bold">Attribute Mapping</emphasis></entry>
                        <entry>Value</entry>
                        <entry><emphasis role="bold">Data Element</emphasis></entry>
                        <entry><emphasis role="bold">Value</emphasis></entry>
                    </row>
                </thead>
                <tbody>
                    <row>
                        <entry>identifier.value</entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry>187e0c12-8dd2...</entry>
                        <entry>id</entry>
                        <entry>187e0c12-8dd2...</entry>
                    </row>
                    <row>
                        <entry>partOf</entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry>reference to (Blood Pressure)</entry>
                        <entry>associated Statement (part of)</entry>
                        <entry>ANF Statement (Blood Pressure)</entry>
                    </row>
                    <row>
                        <entry>status</entry>
                        <entry>&lt; 445584004 |Report by finality status|</entry>
                        <entry> </entry>
                        <entry>"final"</entry>
                        <entry>[<emphasis>redundant</emphasis>]</entry>
                        <entry> </entry>
                    </row>
                    <row>
                        <entry>category</entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry>"vital-signs"</entry>
                        <entry>[<emphasis>redundant</emphasis>]</entry>
                        <entry> </entry>
                    </row>
                    <row>
                        <entry>code</entry>
                        <entry>
                            <para>&lt; 363787002 |Observable entity| OR </para>
                            <para> &lt; 386053000 |Evaluation procedure|</para>
                        </entry>
                        <entry>116680003 |Is a|</entry>
                        <entry>271649006 [Systolic blood pressure]</entry>
                        <entry><emphasis role="bold">topic</emphasis></entry>
                        <entry> 271649006 [Systolic blood pressure]</entry>
                    </row>
                    <row>
                        <entry> subject</entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry>Patient[]</entry>
                        <entry>subjectOfRecord</entry>
                        <entry>Patient[]</entry>
                    </row>
                    <row>
                        <entry>effectiveDateTime</entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry><emphasis role="bold">2017-09-17</emphasis></entry>
                        <entry>time [<emphasis>process interval</emphasis>]</entry>
                        <entry> </entry>
                    </row>
                    <row>
                        <entry> </entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry>time.lowerBound</entry>
                        <entry>2017-09-17T 00:00:00+14:00 </entry>
                    </row>
                    <row>
                        <entry> </entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry>time.upperBound</entry>
                        <entry>2017-09-17T 23:59:59-12:00 </entry>
                    </row>
                    <row>
                        <entry> </entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry>time.semantics</entry>
                        <entry>UTC/Epic Time</entry>
                    </row>
                    <row>
                        <entry>performer</entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry>Practitioner[]</entry>
                        <entry>participant</entry>
                        <entry>Practitioner[]</entry>
                    </row>
                    <row>
                        <entry>valueQuantity</entry>
                        <entry>&lt; 441742003 |Evaluation finding|</entry>
                        <entry>363714003 |Interprets|</entry>
                        <entry> </entry>
                        <entry>circumstance. result [<emphasis>process</emphasis>]</entry>
                        <entry/>
                    </row>
                    <row>
                        <entry>valueQuantity.value</entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry>107</entry>
                        <entry>circumstance. result. lowerBound</entry>
                        <entry>107</entry>
                    </row>
                    <row>
                        <entry> </entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry>circumstance. result. includeLowerBound</entry>
                        <entry><emphasis>true</emphasis></entry>
                    </row>
                    <row>
                        <entry>valueQuantity.system</entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry><emphasis role="underline"><link
                                    xlink:href="http://unitsofmeasure.org/">http:// unitsof
                                    measure.org</link></emphasis></entry>
                        <entry>circumstance. result. upperBound</entry>
                        <entry>107</entry>
                    </row>
                    <row>
                        <entry> </entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry/>
                        <entry>circumstance. result. IncludeUpperBound</entry>
                        <entry><emphasis>true</emphasis></entry>
                    </row>
                    <row>
                        <entry>valueQuantity.code</entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry>mm[Hg]</entry>
                        <entry>circumstance. result. semantic</entry>
                        <entry>mmHg |259018001</entry>
                    </row>
                    <row>
                        <entry>dataAbsentReason</entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry><emphasis>null</emphasis></entry>
                        <entry>circumstance. result. semantic</entry>
                        <entry><emphasis role="italic">null</emphasis></entry>
                    </row>
                    <row>
                        <entry>interpretation</entry>
                        <entry>&lt; 260245000 |Findings values|</entry>
                        <entry>363713009 |Has interpretation|</entry>
                        <entry>Normal</entry>
                        <entry>circumstance. healthRisk</entry>
                        <entry>Normal</entry>
                    </row>
                    <row>
                        <entry>bodySite</entry>
                        <entry>&lt; 123037004 |Body structure|</entry>
                        <entry>718497002 |Inherent location|</entry>
                        <entry>368209003 [Right arm]</entry>
                        <entry>topic [append]</entry>
                        <entry>topic + |718497002 [Inherent location] 368209003 [Right arm]</entry>
                    </row>
                    <row>
                        <entry>method</entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry><emphasis>null</emphasis></entry>
                        <entry>topic [<emphasis>append</emphasis>]</entry>
                        <entry><emphasis role="italic">null</emphasis></entry>
                    </row>
                    <row>
                        <entry>specimen</entry>
                        <entry>&lt; 123038009 |Specimen|</entry>
                        <entry>704319004 |Inherent in</entry>
                        <entry><emphasis>null</emphasis></entry>
                        <entry>topic [<emphasis>append</emphasis>]</entry>
                        <entry><emphasis role="italic">null</emphasis></entry>
                    </row>
                    <row>
                        <entry>device</entry>
                        <entry>&lt; 49062001 |Device|</entry>
                        <entry>424226004 |Using device|</entry>
                        <entry><emphasis>null</emphasis></entry>
                        <entry>topic [<emphasis>append</emphasis>]</entry>
                        <entry><emphasis role="italic">null</emphasis></entry>
                    </row>
                    <row>
                        <entry>referenceRange</entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry><emphasis>null</emphasis></entry>
                        <entry>circumstance. referenceRange</entry>
                        <entry><emphasis role="italic">null</emphasis></entry>
                    </row>
                </tbody>
            </tgroup>
        </table>
    </section>
    
    <section>
        <title>Normalizing a FHIR Condition</title>
        <para>This example demonstrates how a FHIR Condition (Bacterial sepsis) can be represented
            as a normalized statement using the ANF Reference Model and normalization guidance
            described in Editorial Rules.</para>
        <table>
            <title>FHIR Condition to ANF Statement Transform</title>
            <tgroup cols="6">
                <colspec colnum="1" colname="col1" colwidth="1*"/>
                <colspec colnum="2" colname="col2" colwidth="1*"/>
                <colspec colnum="3" colname="col3" colwidth="1*"/>
                <colspec colnum="4" colname="col4" colwidth="1*"/>
                <colspec colnum="5" colname="col5" colwidth="1*"/>
                <colspec colnum="6" colname="col6" colwidth="1*"/>
                <thead>
                    <row>
                        <entry namest="col1" nameend="col3"><emphasis role="bold"
                                >Condition</emphasis></entry>
                        <entry><emphasis role="bold">Bacterial sepsis</emphasis> Example</entry>
                        <entry namest="col5" nameend="col6"><emphasis role="bold"
                            >ANFStatement</emphasis></entry>
                    </row>
                    <row>
                        <entry><emphasis role="bold">Data Element</emphasis></entry>
                        <entry><emphasis role="bold">Concept Domain Mapping</emphasis></entry>
                        <entry><emphasis role="bold">Attribute Mapping</emphasis></entry>
                        <entry>Value</entry>
                        <entry><emphasis role="bold">Data Element</emphasis></entry>
                        <entry><emphasis role="bold">Value</emphasis></entry>
                    </row>
                </thead>
                <tbody>
                    <row>
                        <entry>identifier.value</entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry>bf273c878281...</entry>
                        <entry>id</entry>
                        <entry>bf273c878281...</entry>
                    </row>
                    <row>
                        <entry>clinicalStatus. coding</entry>
                        <entry/>
                        <entry> 408729009 |Finding context</entry>
                        <entry>"active"</entry>
                        <entry>circumstance. result</entry>
                        <entry> [1,inf) Countable Quantity/present</entry>
                    </row>
                    <row>
                        <entry>verificationStatus. coding</entry>
                        <entry/>
                        <entry> </entry>
                        <entry>"confirmed"</entry>
                        <entry>[<emphasis>redundant</emphasis>]</entry>
                        <entry> </entry>
                    </row>
                    <row>
                        <entry>category</entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry>55607006| Problem</entry>
                        <entry><emphasis role="bold">topic</emphasis></entry>
                        <entry> 55607006|Problem </entry>
                    </row>
                    <row>
                        <entry>severity.</entry>
                        <entry> &lt; 272141005 |Severities|</entry>
                        <entry> </entry>
                        <entry>371924009|Moderate to severe</entry>
                        <entry>topic [append]</entry>
                        <entry>topic + 371924009|Moderate to severe </entry>
                    </row>
                    <row>
                        <entry>code</entry>
                        <entry> 246090004 |Associated finding| (&lt; 404684003 |Clinical finding| MINUS
                            &lt;&lt; 420134006 |Propensity to adverse reactions| MINUS
                            &lt;&lt; 473010000 |Hypersensitivity condition| MINUS
                            &lt;&lt; 79899007 |Drug interaction| MINUS
                            &lt;&lt; 69449002 |Drug action| MINUS
                            &lt;&lt; 441742003 |Evaluation finding| MINUS
                            &lt;&lt; 307824009 |Administrative status| MINUS
                            &lt;&lt; 385356007 |Tumor stage finding|)
                            OR &lt; 413350009 |Finding with explicit context|
                            OR &lt;272379006 |Event||
                        </entry>
                        <entry>116680003 |Is a|</entry>
                        <entry>10001005 |Bacterial sepsis</entry>
                        <entry>topic [append] </entry>
                        <entry>topic +  10001005 |Bacterial sepsis</entry>
                    </row>
                    <row>
                        <entry>bodySite</entry>
                        <entry>&lt; 442083009 |Anatomical or acquired body structure|</entry>
                        <entry>363698007 |Finding site|</entry>
                        <entry> 281158006 |Pulmonary vascular structure</entry>
                        <entry>topic [append]</entry>
                        <entry>topic + 363698007 |Finding site|+ 281158006 |Pulmonary vascular structure</entry>
                    </row>
                    <row>
                        <entry> subject</entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry>Patient[]</entry>
                        <entry>subjectOfRecord</entry>
                        <entry>Patient[]</entry>
                    </row>
                    <row>
                        <entry>onsetDateTime</entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry><emphasis role="bold">2013-03-08</emphasis></entry>
                        <entry>circumstance. timing [<emphasis>process interval</emphasis>]</entry>
                        <entry> </entry>
                    </row>
                    <row>
                        <entry> </entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry>circumstance. timing. lowerBound</entry>
                        <entry>2013-03-08T 00:00:00+14:00 </entry>
                    </row>
                    <row>
                        <entry> </entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry>circumstance. timing. upperBound</entry>
                        <entry>2013-03-08T 23:59:59-12:00 </entry>
                    </row>
                    <row>
                        <entry> </entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry>circumstance. timing. semantics</entry>
                        <entry>UTC/Epic Time</entry>
                    </row>
                    <row>
                        <entry>recordedDate</entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry><emphasis role="bold">2013-03-11</emphasis></entry>
                        <entry>time [<emphasis>process interval</emphasis>]</entry>
                        <entry> </entry>
                    </row>
                    <row>
                        <entry> </entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry>time. lowerBound</entry>
                        <entry>2013-03-11T 00:00:00+14:00 </entry>
                    </row>
                    <row>
                        <entry> </entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry>time. upperBound</entry>
                        <entry>2013-03-11T 23:59:59-12:00 </entry>
                    </row>
                    <row>
                        <entry> </entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry>time. semantics</entry>
                        <entry>UTC/Epic Time</entry>
                    </row>
                    <row>
                        <entry>asserter</entry>
                        <entry> </entry>
                        <entry> </entry>
                        <entry>Practitioner[]</entry>
                        <entry>author</entry>
                        <entry>Practitioner[]</entry>
                    </row>                    
                    
                </tbody>
            </tgroup>
        </table>
    </section>
</section>
