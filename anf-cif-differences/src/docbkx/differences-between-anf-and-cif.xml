<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/css" href="CSS/docbook.xml.css"?>
<?xml-model href="http://docbook.org/xml/5.1/rng/docbookxi.rng" schematypens="http://relaxng.org/ns/structure/1.0"?>
<?xml-model href="http://docbook.org/xml/5.1/sch/docbook.sch" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns:xlink="http://www.w3.org/1999/xlink" version="5.1">
    <title>Differences between ANF and CIF </title>
    <informaltable>
        <tgroup cols="1">
            <colspec colnum="1" colname="col1"/>
            <tbody>
                <row>
                    <entry>
                        <para><emphasis role="bold">Purpose of this section:</emphasis></para>
                        <itemizedlist>
                            <listitem>
                                <para>Explain how the ANF Model is different from CIF </para>
                            </listitem>
                            <listitem>
                                <para>Explain the consequences of the differences for data
                                    retrieval</para>
                            </listitem>
                        </itemizedlist>
                    </entry>
                </row>
            </tbody>
        </tgroup>
    </informaltable>
    <para>There are two fundamental differences between the ANF and CIF approach. The first is the
        representation of topic, and the second is the representation of results.</para>
    <orderedlist>
        <listitem>
            <para>The representation of topic.</para>
        </listitem>
        <listitem>
            <para>The representation of results.</para>
        </listitem>
    </orderedlist>
    <section>
        <title>The Representation of Topic</title>
        <para>In the ANF model, the topic is represented by a single field containing a simple to
            complex expression using codeable concepts, whereas in the CIF model, all the pieces of
            information that make up the topic are broken out and structured as needed into multiple
            properties with property names and appropriate datatypes.</para>
        <para>
            <figure>
                <title>Topic Comparison for a Complex Topic</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/cif_anf_topic.svg"/>
                    </imageobject>
                </mediaobject>
            </figure>
        </para>
        <para>One implication of this is that the ANF is using two formalisms to represent the
            detailed clinical model. First it uses the formalism that represents the ANF reference
            model and constraints such as HL7's StructureDefinition syntax or OpenEHR's BMM/ADL
            syntax. Second, it uses SNOMED's syntax for post co-ordinated SNOMED expressions. Tools
            for authoring and analysis would be required to parse and process both syntaxes.</para>
        <para>The CIF model, on the other hand, would be fully represented using the formalism that
            represents the CIF reference model and constraints such as HL7's StructureDefinition
            syntax or OpenEHR's BMM/ADL syntax.</para>
    </section>
    <section>
        <title>The Representation of Results</title>
        <para>In the CIMI CIF model, EvaluationResult and Assertion models are used to represent
            results. Evaluation- Result has a topic representing what is being observed, and a
            result represented by a choice of datatypes. An Assertion on the other hand, has simply
            a topic with a value of 'assertion', and a result stated what is being asserted.</para>
        <para>In the ANF model, the topic represents what is being observed and the result may only
            be a range of either a count or quantity. No coded results are allowed.</para>
        <para>In the CIF model, when creating a model with a numeric result, the choice is quite
            clear, and the choice will be an EvaluationResult, such as a topic of 'SerumSodium' and
            result with a numeric quantity. In this case, the CIF and ANF model are very aligned,
            except for the fact that the ANF model will use a range of that quantity.</para>
        <para>But when a CIF model has a potential coded result, the choice between EvaluationResult
            and Assertion becomes muddied. For example, a model for Breath Sound could be an
            EvaluationResult with a topic of 'breath sound' and a coded result with the following
            valueset. Thus, any of the breath sounds within the valueset can act as a result for
            this model. </para>
        <para>
            <table>
                <title>Breath Sound Valueset</title>
                <tgroup cols="1">
                    <thead>
                        <row>
                            <entry>Breath Sound Value</entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>Absent</entry>
                        </row>
                        <row>
                            <entry>Audible</entry>
                        </row>
                        <row>
                            <entry>Clear</entry>
                        </row>
                        <row>
                            <entry>Coarse Breath Sounds</entry>
                        </row>
                        <row>
                            <entry>Coarse Crackles</entry>
                        </row>
                        <row>
                            <entry>Crackles</entry>
                        </row>
                        <row>
                            <entry>Diminished</entry>
                        </row>
                        <row>
                            <entry>Expiratory wheezing</entry>
                        </row>
                        <row>
                            <entry>Faint</entry>
                        </row>
                        <row>
                            <entry>Fine Crackles</entry>
                        </row>
                        <row>
                            <entry>Forced</entry>
                        </row>
                        <row>
                            <entry>Inspiratory wheezing</entry>
                        </row>
                        <row>
                            <entry>Left Ventricular Assist Device Noise</entry>
                        </row>
                        <row>
                            <entry>Markedly Decreased</entry>
                        </row>
                        <row>
                            <entry>Moderately Decreased</entry>
                        </row>
                        <row>
                            <entry>Pleural Rub</entry>
                        </row>
                        <row>
                            <entry>Prolonged Expiration</entry>
                        </row>
                        <row>
                            <entry>Rhonchi</entry>
                        </row>
                        <row>
                            <entry>Slightly Decreased</entry>
                        </row>
                        <row>
                            <entry>Stridor</entry>
                        </row>
                        <row>
                            <entry>Tubular Breath Sounds</entry>
                        </row>
                        <row>
                            <entry>Upper Airway Congestion</entry>
                        </row>
                        <row>
                            <entry>Wheeze</entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
        </para>
        <para>The other option, is that each of the breath sounds in the valueset is modeled as an
            Assertion with a topic of 'assertion', and a result of each particular code. To decided
            which model is better, usually we ponder how the clinician thinks about the data, or how
            it will be collected, or how it will be queried.</para>
        <para>The ANF model cannot do an EvaluationResult style model as it doesn't allow coded
            results. Thus, ANF is forced to make one and only one choice, which is an assertion
            style where the particular breath sound is the topic, and the result will be numeric
            count indicating presence or absence.</para>
        <?oxy_comment_start author="kmaulden" timestamp="20190423T101942-0400" comment="So, are we saying here, that CIF is actually better than ANF for queries?"?>
        <para>When querying instance data, the Assertion or ANF style is much more difficult for
            things like breath sounds. To query any breath sound instances, you must have knowledge
            of all possible
            <?oxy_comment_start author="timowilliams" timestamp="20190501T223018-0500" comment="Is this really true?  Wouldn&apos;t they all be subtypes of finding of breath sounds, assuming all breath sounds are in the correct hierarchy?"?>breath<?oxy_comment_end?>
            sound topics and query for each. With the EvaluationResult style, querying is simpler as
            you simply query for a topic of 'breath sound', and the code result tells you what type
            of breath sound it is. Thus, you do not have to know all the members of the valueset
            apriori to form the query. Clinical StatementExamples.</para><?oxy_comment_end?>
    </section>
    <section>
        <title>ANF vs CIMI Examples</title>
        <para></para>
        <section>
            <title>Simple Systolic Blood Pressure</title>
            <figure>
                <title>Simple Systolic Blood Pressure - ANF Representation</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/blood_pressure_anf.svg" scalefit="1"
                            width="100%" contentdepth="50%"/>
                    </imageobject>
                </mediaobject>
            </figure>
            <figure>
                <title>Simple Systolic Blood Pressure - CIMI Representation</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/blood_pressure_cimi.svg" scalefit="1"
                            width="100%" contentdepth="50%"/>
                    </imageobject>
                </mediaobject>
            </figure>
        </section>
        <section>
            <title>Pulse Rate</title>
            <figure>
                <title>Pulse Rate - ANF Representation</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/pulse_rate_anf.svg" scalefit="1"
                            width="100%" contentdepth="50%"/>
                    </imageobject>
                </mediaobject>
            </figure>
            <figure>
                <title>Pulse Rate - CIMI Representation</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="images/pulse_rate_cimi.svg" scalefit="1"
                            width="100%" contentdepth="50%"/>
                    </imageobject>
                </mediaobject>
            </figure>
        </section>    
        
    </section>
</chapter>
